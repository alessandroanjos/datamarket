<?xml version="1.0" encoding="ISO-8859-1" ?> 
<maquinaEstado>
  <listaMicroperacao>
    <operacao id="OpAVSolicitaUsuario" classe="com.infinity.datamarket.av.op.OpAVSolicitaUsuario"/>
    <operacao id="OpAVIniciaAV" classe="com.infinity.datamarket.av.op.OpAVIniciaAV"/>
    <operacao id="OpAVBloqueiaAV" classe="com.infinity.datamarket.av.op.OpAVBloqueiaAV"/>
    <operacao id="OpAVLeituraTipoOperacoa" classe="com.infinity.datamarket.av.op.OpAVLeituraTipoOperacoa"/>
    <operacao id="OpAvEncerraIniciaAv" classe="com.infinity.datamarket.av.op.OpAvEncerraIniciaAv"/>
    <operacao id="OpAVSolicitaCliente" classe="com.infinity.datamarket.av.op.OpAVSolicitaCliente"/>
    <operacao id="OpAVIniciaPedido" classe="com.infinity.datamarket.av.op.OpAVIniciaPedido"/>
    <operacao id="OpAVEncerraPedido" classe="com.infinity.datamarket.av.op.OpAVEncerraPedido"/>
    <operacao id="OpAvSaidaDois" classe="com.infinity.datamarket.av.op.OpAvSaidaDois"/>
    <operacao id="OpAvSaidaUm" classe="com.infinity.datamarket.av.op.OpAvSaidaUm"/>
    <operacao id="OpAvConsultaProduto" classe="com.infinity.datamarket.av.op.OpAvConsultaProduto"/>
    <operacao id="OpAvConsultaQuantidadeProduto" classe="com.infinity.datamarket.av.op.OpAvConsultaQuantidadeProduto"/>
    <operacao id="OpAVEncerraIcluirItem" classe="com.infinity.datamarket.av.op.OpAVEncerraIcluirItem"/>
    <operacao id="OpAvAdicionaItemPedido" classe="com.infinity.datamarket.av.op.OpAvAdicionaItemPedido"/>
    <operacao id="OpAvSolicitaDescontoValorProduto" classe="com.infinity.datamarket.av.op.OpAvSolicitaDescontoValorProduto"/>
    <operacao id="OpAvSolicitaValor" classe="com.infinity.datamarket.av.op.OpAvSolicitaValor"/>
    <operacao id="OpAvSaidaSistema" classe="com.infinity.datamarket.av.op.OpAvSaidaSistema"/>
    <operacao id="OpAvExibeDisplayDescricaoEstado" classe="com.infinity.datamarket.av.op.OpAvExibeDisplayDescricaoEstado"/>
    <operacao id="OpAvConfirmaExcluirItem" classe="com.infinity.datamarket.av.op.OpAvConfirmaExcluirItem"/>
    <operacao id="OpAvSolicitaProdutoParaExclusao" classe="com.infinity.datamarket.av.op.OpAvSolicitaProdutoParaExclusao"/>
    <operacao id="OpAvDesenhaTabelaPedido" classe="com.infinity.datamarket.av.op.OpAvDesenhaTabelaPedido"/>
    <operacao id="OpAvConfirmaFinalizacaoPedido" classe="com.infinity.datamarket.av.op.OpAvConfirmaFinalizacaoPedido"/>
    <operacao id="OpAvFinalizacaoPedido" classe="com.infinity.datamarket.av.op.OpAvFinalizacaoPedido"/>
    <operacao id="OpAVConfirmaEncerraPedido" classe="com.infinity.datamarket.av.op.OpAVConfirmaEncerraPedido"/>
    <operacao id="OpAvImprimeReciboPedido" classe="com.infinity.datamarket.av.op.OpAvImprimeReciboPedido"/>
    <operacao id="OpAVIniciaSeparacao" classe="com.infinity.datamarket.av.op.OpAVIniciaSeparacao"/>
    <operacao id="OpAVConsultaTelaPedido" classe="com.infinity.datamarket.av.op.OpAVConsultaTelaPedido"/>
    <operacao id="OpAVEncerraSeparacao" classe="com.infinity.datamarket.av.op.OpAVEncerraSeparacao"/>
    <operacao id="OpAVIncluirPedidoEmSeparacao" classe="com.infinity.datamarket.av.op.OpAVIncluirPedidoEmSeparacao"/>
    <operacao id="OpAVConfirmaEncerraSeparacao" classe="com.infinity.datamarket.av.op.OpAVConfirmaEncerraSeparacao"/>
    <operacao id="OpAVCancelarSeparacaoServidor" classe="com.infinity.datamarket.av.op.OpAVCancelarSeparacaoServidor"/>
  </listaMicroperacao>

  <listaEstado>
    <estado codigo="Fechado" descricao="Av Fechado [ENTER]" inputType="0" inputSize="0"/>
    <estado codigo="Aberto" descricao="Digite Operacao [1-P;2-D]" inputType="0" inputSize="0"/>
    <estado codigo="Pedido" descricao="Codigo do Produto" inputType="3" inputSize="13"/>
    <estado codigo="Separacao" descricao="Codigo do Produto" inputType="3" inputSize="13"/>
    <estado codigo="Devolucao" descricao="Devolucao" inputType="3" inputSize="1"/>
  </listaEstado>

  <listaTecla>
    <tecla codigo="ENTER" descricao="ENTER" codigoASCI="10" />
    <tecla codigo="P" descricao="P" codigoASCI="80" />
    <tecla codigo="D" descricao="D" codigoASCI="68" />
    <tecla codigo="E" descricao="E" codigoASCI="69" />
    <tecla codigo="F" descricao="F" codigoASCI="70" />
    <tecla codigo="TECLA4" descricao="ESPACO" codigoASCI="32" />
    <tecla codigo="ESC" descricao="ESC" codigoASCI="27" />
    <tecla codigo="S" descricao="S" codigoASCI="83" />
  </listaTecla>
  <listaMacroOperacao>
	<macroOperacao estadoAtual="Fechado" proximoEstado="Fechado" tecla="S" codigoMicroOperacaoAssociada="subFluxo1" descricao="Saida Sistema Fechado">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAvSaidaSistema">
 	    <saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="subFluxo2" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo2" operacao="OpAvExibeDisplayDescricaoEstado">
      </microOperacaoAssociada>
    </macroOperacao>

	<macroOperacao estadoAtual="Aberto" proximoEstado="Aberto" tecla="S" codigoMicroOperacaoAssociada="subFluxo1" descricao="Saida Sistema Aberto">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAvSaidaSistema">
 	    <saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="subFluxo2" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo2" operacao="OpAvExibeDisplayDescricaoEstado">
      </microOperacaoAssociada>
    </macroOperacao>

	<macroOperacao estadoAtual="Devolucao" proximoEstado="Devolucao" tecla="S" codigoMicroOperacaoAssociada="subFluxo1" descricao="Saida Sistema Devolucao">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAvSaidaSistema">
 	    <saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="subFluxo2" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo2" operacao="OpAvExibeDisplayDescricaoEstado">
      </microOperacaoAssociada>
    </macroOperacao>

	<macroOperacao estadoAtual="Pedido" proximoEstado="Pedido" tecla="S" codigoMicroOperacaoAssociada="subFluxo1" descricao="Saida Sistema Pedido">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAvSaidaSistema">
 	    <saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="subFluxo2" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo2" operacao="OpAvExibeDisplayDescricaoEstado">
      </microOperacaoAssociada>
    </macroOperacao>

  
    <macroOperacao estadoAtual="Fechado" proximoEstado="Aberto" tecla="ENTER" codigoMicroOperacaoAssociada="subFluxo1" descricao="Abertura de AV">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAVIniciaAV">
 	    <saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo2" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo2" operacao="OpAVSolicitaUsuario">
      </microOperacaoAssociada>
    </macroOperacao>

    <macroOperacao estadoAtual="Aberto" proximoEstado="Fechado" tecla="ESC" codigoMicroOperacaoAssociada="subFluxo1" descricao="Volta Fechado">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAvEncerraIniciaAv">
      </microOperacaoAssociada>
    </macroOperacao>

	<macroOperacao estadoAtual="Separacao" proximoEstado="Separacao" tecla="S" codigoMicroOperacaoAssociada="subFluxo1" descricao="Saida Separacao">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAvSaidaSistema">
 	    <saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="subFluxo2" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo2" operacao="OpAVCancelarSeparacaoServidor">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo3" />
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="subFluxo3" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo3" operacao="OpAvExibeDisplayDescricaoEstado">
      </microOperacaoAssociada>
    </macroOperacao>

    <macroOperacao estadoAtual="Separacao" proximoEstado="Aberto" tecla="ESC" codigoMicroOperacaoAssociada="subFluxo1" descricao="Volta Separacao">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAVConfirmaEncerraSeparacao">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo2" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo2" operacao="OpAVCancelarSeparacaoServidor">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo3" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo3" operacao="OpAVEncerraSeparacao">
      </microOperacaoAssociada>
    </macroOperacao>

    <macroOperacao estadoAtual="Aberto" proximoEstado="Separacao" tecla="E" codigoMicroOperacaoAssociada="subFluxo1" descricao="Separacao">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAVIniciaSeparacao">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo310" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo310" operacao="OpAVConsultaTelaPedido">
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="saida" />
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo2" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo2" operacao="OpAVIncluirPedidoEmSeparacao">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo3" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo3" operacao="OpAvDesenhaTabelaPedido">
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="saidaDois" />
      </microOperacaoAssociada>

      <microOperacaoAssociada codigoMicroOperacaoAssociada="saida" operacao="OpAVEncerraSeparacao">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="saidaDois" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="saidaDois" operacao="OpAvSaidaDois">
      </microOperacaoAssociada>
    </macroOperacao>

    <macroOperacao estadoAtual="Aberto" proximoEstado="Pedido" tecla="P" codigoMicroOperacaoAssociada="subFluxo1" descricao="Pedido">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAVIniciaPedido">
 	    <saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo2" />
 	    <saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="saida" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo2" operacao="OpAVSolicitaCliente">
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="saida" operacao="OpAVEncerraPedido">
      </microOperacaoAssociada>
    </macroOperacao>

    <macroOperacao estadoAtual="Pedido" proximoEstado="Aberto" tecla="ESC" codigoMicroOperacaoAssociada="subFluxo0" descricao="Volta Fechado">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo0" operacao="OpAVConfirmaEncerraPedido">
 	    <saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="subFluxo1" />
 	    <saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="continua" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAVEncerraPedido">
 	    <saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="saida" />
 	    <saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="saida" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="saida" operacao="OpAvSaidaUm">
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="continua" operacao="OpAvSaidaDois">
      </microOperacaoAssociada>
    </macroOperacao>
    
    <macroOperacao estadoAtual="Pedido" proximoEstado="Pedido" tecla="ENTER" codigoMicroOperacaoAssociada="subFluxo1" descricao="Venda Item">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAvConsultaProduto">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo11" />
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="saida" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo11" operacao="OpAvSolicitaValor">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo2" />
      <!-- <saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="subFluxo1" /> -->	
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo2" operacao="OpAvConsultaQuantidadeProduto">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo3" />
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="subFluxo11" />
      	<saidaMicroOperacaoAssociada tipoSaida="3" codigoMicroOperacaoAssociadaDestino="saidaDois" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo3" operacao="OpAvSolicitaDescontoValorProduto">
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="subFluxo2" />
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo4" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo4" operacao="OpAvAdicionaItemPedido">
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="saida" />
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo5" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo5" operacao="OpAvDesenhaTabelaPedido">
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="saida" />
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="saida" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="saida" operacao="OpAVEncerraIcluirItem">
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="saidaDois" operacao="OpAvSaidaDois">
      </microOperacaoAssociada>
    </macroOperacao>

    <macroOperacao estadoAtual="Pedido" proximoEstado="Pedido" tecla="E" codigoMicroOperacaoAssociada="subFluxo1" descricao="Excluir Venda Item">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAvConfirmaExcluirItem">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo2" />
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="saida" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo2" operacao="OpAvSolicitaProdutoParaExclusao">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo3" />
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="saida" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo3" operacao="OpAvDesenhaTabelaPedido">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="saida" />
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="saida" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="saida" operacao="OpAVEncerraIcluirItem">
      </microOperacaoAssociada>
    </macroOperacao>

    <macroOperacao estadoAtual="Pedido" proximoEstado="Aberto" tecla="F" codigoMicroOperacaoAssociada="subFluxo1" descricao="Finaliza Pedido">
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo1" operacao="OpAvConfirmaFinalizacaoPedido">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo2" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo2" operacao="OpAvFinalizacaoPedido">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo3" />
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="saida" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo3" operacao="OpAvImprimeReciboPedido">
      	<saidaMicroOperacaoAssociada tipoSaida="1" codigoMicroOperacaoAssociadaDestino="subFluxo4" />
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="saida" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="subFluxo4" operacao="OpAVEncerraPedido">
      	<saidaMicroOperacaoAssociada tipoSaida="2" codigoMicroOperacaoAssociadaDestino="saida" />
      </microOperacaoAssociada>
      <microOperacaoAssociada codigoMicroOperacaoAssociada="saida" operacao="OpAVEncerraIcluirItem">
      </microOperacaoAssociada>
    </macroOperacao>
     
  </listaMacroOperacao>
</maquinaEstado>
