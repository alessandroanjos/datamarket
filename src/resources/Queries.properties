RELATORIO_ANALITICO_VENDAS = SELECT T.LOJA,T.COMPONENTE,T.NUM_TRANSACAO,T.DATA_TRANSACAO,CT.NOME_CLIENTE,TV.NUMERO_CUPOM,TV.VALOR_CUPOM,TV.DESCONTO_CUPOM,TV.COMISSAO_USU_VENDEDOR,U.NOME,EVT.NUM_EVENTO,PIR.CODIGO_EXTERNO,PIR.DESCRICAO_COMPLETA, EIR.QUANTIDADE, EIR.DESCONTO, PIR.PRECO_PRATICADO, EIR.PRECO FROM TRANSACAO T, TRANSACAO_VENDA TV, CLIENTE_TRANSACAO CT, USUARIO U, EVENTO_TRANSACAO EVT, EVENTO_ITEM_REGISTRADO EIR, PRODUTO_ITEM_REGISTRADO PIR WHERE T.LOJA = TV.LOJA AND T.COMPONENTE = TV.COMPONENTE AND T.DATA_TRANSACAO = TV.DATA_TRANSACAO AND T.NUM_TRANSACAO = TV.NUM_TRANSACAO AND T.LOJA = EVT.LOJA AND T.COMPONENTE = EVT.COMPONENTE AND T.DATA_TRANSACAO = EVT.DATA_TRANSACAO AND T.NUM_TRANSACAO = EVT.NUM_TRANSACAO AND EIR.LOJA = EVT.LOJA AND EIR.COMPONENTE = EVT.COMPONENTE AND EIR.DATA_TRANSACAO = EVT.DATA_TRANSACAO AND EIR.NUM_TRANSACAO = EVT.NUM_TRANSACAO AND EIR.NUM_EVENTO = EVT.NUM_EVENTO AND EIR.LOJA = PIR.LOJA AND EIR.COMPONENTE = PIR.COMPONENTE AND EIR.DATA_TRANSACAO = PIR.DATA_TRANSACAO AND EIR.NUM_TRANSACAO = PIR.NUM_TRANSACAO AND EIR.NUM_EVENTO = PIR.NUM_EVENTO AND T.TIPO_TRANSACAO = 11 AND TV.CPF_CNPJ_CLIENTE_TRANSACAO *= CT.CPF_CNPJ AND TV.COD_USU_VENDEDOR *= U.ID AND TV.SITUACAO = 'A' AND EIR.SITUACAO = 'A' AND T.LOJA = ? AND T.DATA_TRANSACAO BETWEEN ? AND ? ORDER BY T.DATA_TRANSACAO, T.LOJA  

RELATORIO_ANALITICO_ENTRADAS = SELECT EP.ID, EP.NUMERO_NOTA, EP.DATA_EMISSAO_NOTA, EP.DATA_ENTRADA, EP.FRETE, EP.ICMS, EP.IPI, EP.DESCONTO, EP.VALOR, EP.QUANTIDADE_TOTAL, CASE EP.STATUS WHEN \'A\' THEN \'Ativa\' ELSE \'Cancelada\' END STATUS, CASE F.TIPO_PESSOA WHEN \'F\' THEN F.NOME_FORNECEDOR ELSE F.RAZAO_SOCIAL END FORNECEDOR, PEP.NUM_ENTRADA ,P.DESCRICAO_COMPLETA, P.CODIGO_EXTERNO, PEP.PRECO_UNITARIO, PEP.QUANTIDADE QUANTIDADE_ITEM, PEP.DESCONTO DESCONTO_ITEM, PEP.ICMS ICMS_ITEM, PEP.IPI IPI_ITEM, PEP.TOTAL, E.DESCRICAO ESTOQUE, E.ID_LOJA FROM ENTRADA_PRODUTO EP, PRODUTO_ENTRADA_PRODUTO PEP, PRODUTO P, ESTOQUE E, FORNECEDOR F WHERE EP.ID = PEP.ID_ENTRADA_PRODUTO AND PEP.ID_PRODUTO = P.ID AND EP.ID_LOJA = E.ID_LOJA AND EP.ID_ESTOQUE = E.ID AND EP.ID_FORNECEDOR = F.ID AND EP.DATA_ENTRADA BETWEEN ? AND ? AND EP.STATUS IN (?) AND EP.ID_LOJA = ? AND EP.ID_ESTOQUE = ? ORDER BY EP.DATA_ENTRADA, EP.ID

RELATORIO_ANALITICO_MOVIMENTACAO_ESTOQUE = SELECT ME.DATA, ME.ID, ES.ID_LOJA LOJA_SAIDA, ES.DESCRICAO ESTOQUE_SAIDA, EE.ID_LOJA LOJA_ENTRADA, EE.DESCRICAO ESTOQUE_ENTRADA, PME.NUM_ENTRADA, P.CODIGO_EXTERNO, P.DESCRICAO_COMPLETA, PME.QUANTIDADE FROM MOVIMENTACAO_ESTOQUE ME, ESTOQUE ES, ESTOQUE EE, PRODUTO_MOVIMENTACAO_ESTOQUE PME, PRODUTO P WHERE ME.ID_ESTOQUE_SAI = ES.ID AND ME.ID_LOJA_SAI = ES.ID_LOJA AND ME.ID_ESTOQUE_ENT = EE.ID AND ME.ID_LOJA_ENT = EE.ID_LOJA AND ME.ID = PME.ID_MOVIMENTACAO_ESTOQUE AND PME.ID_PRODUTO = P.ID AND (ME.DATA BETWEEN ? AND ?) AND ES.ID_LOJA = ? AND ME.ID_ESTOQUE_SAI = ? AND EE.ID_LOJA = ? AND ME.ID_ESTOQUE_ENT = ? ORDER BY ME.DATA, ME.ID 

RELATORIO_ANALITICO_OPERACAO_DEVOLUCAO = SELECT O.DATA, O.ID, O.LOJA, O.STATUS, OD.VALOR, C.NOME_CLIENTE CLIENTE, U.NOME USUARIO, EO.NUM_EVENTO, POIR.CODIGO_EXTERNO, POIR.DESCRICAO_COMPLETA, EOIR.QUANTIDADE, EOIR.PRECO FROM OPERACAO O, OPERACAO_DEVOLUCAO OD, EVENTO_OPERACAO EO, EVENTO_OPERACAO_ITEM_REGISTRADO EOIR, PRODUTO_OPERAC_ITEM_REGISTRADO POIR, CLIENTE_TRANSACAO C, USUARIO U WHERE O.ID = OD.ID AND O.LOJA = OD.LOJA AND O.ID = EO.ID AND O.LOJA = EO.LOJA AND EO.ID = EOIR.ID AND EO.LOJA = EOIR.LOJA AND EO.NUM_EVENTO = EOIR.NUM_EVENTO AND EOIR.ID = POIR.ID AND EOIR.LOJA = POIR.LOJA AND EOIR.NUM_EVENTO = POIR.NUM_EVENTO AND OD.COD_USU_OPERADOR = U.ID AND OD.CPF_CNPJ_CLIENTE_TRANSACAO = C.CPF_CNPJ AND O.TIPO = 10 AND O.DATA BETWEEN ? AND ? AND O.LOJA = ? ORDER BY O.DATA, O.ID
      
RELATORIO_ABC_VENDAS_VALOR = select pir.codigo_externo, pir.descricao_completa, sum(eir.quantidade) qtd, sum(eir.preco) valor, sum(eir.lucro) lucro from produto_item_registrado pir, evento_item_registrado eir, transacao_venda tv where pir.loja = eir.loja and pir.componente = eir.componente and pir.num_transacao = eir.num_transacao and pir.data_transacao = eir.data_transacao and pir.num_evento = eir.num_evento and tv.loja = eir.loja and tv.componente = eir.componente and tv.num_transacao = eir.num_transacao and tv.data_transacao = eir.data_transacao and tv.situacao <> 'C' and eir.situacao <> 'C' and tv.data_transacao BETWEEN ? AND ? and tv.loja = ? group by pir.codigo_externo, pir.descricao_completa order by sum(eir.preco)

RELATORIO_ABC_VENDAS_QTD = select pir.codigo_externo, pir.descricao_completa, sum(eir.quantidade) qtd, sum(eir.preco) valor, sum(eir.lucro) lucro from produto_item_registrado pir, evento_item_registrado eir, transacao_venda tv where pir.loja = eir.loja and pir.componente = eir.componente and pir.num_transacao = eir.num_transacao and pir.data_transacao = eir.data_transacao and pir.num_evento = eir.num_evento and tv.loja = eir.loja and tv.componente = eir.componente and tv.num_transacao = eir.num_transacao and tv.data_transacao = eir.data_transacao and tv.situacao <> 'C' and eir.situacao <> 'C' and tv.data_transacao BETWEEN ? AND ? and tv.loja = ? group by pir.codigo_externo, pir.descricao_completa order by sum(eir.quantidade)

RELATORIO_ABC_VENDAS_TOTAL = select sum(eir.preco) valor, sum(eir.quantidade) qtd from produto_item_registrado pir, evento_item_registrado eir, transacao_venda tv where pir.loja = eir.loja and pir.componente = eir.componente and pir.num_transacao = eir.num_transacao and pir.data_transacao = eir.data_transacao and pir.num_evento = eir.num_evento and tv.loja = eir.loja and tv.componente = eir.componente and tv.num_transacao = eir.num_transacao and tv.data_transacao = eir.data_transacao and tv.situacao <> 'C' and eir.situacao <> 'C' and tv.data_transacao BETWEEN ? AND ? and tv.loja = ? 

RELATORIO_FECHAMENTO_CAIXA_OPERADOR = SELECT T.LOJA,T.DATA_TRANSACAO,C.DESCRICAO COMPONENTE, U.NOME OPERADOR,F.DESCRICAO,SUM((EIP.VALOR_BRUTO - EIP.VALOR_DESCONTO)) VALOR FROM TRANSACAO T, TRANSACAO_VENDA TV, EVENTO_TRANSACAO EVT, EVENTO_ITEM_PAGAMENTO EIP, FORMA_RECEBIMENTO F, COMPONENTE C, USUARIO U WHERE T.LOJA = TV.LOJA AND T.COMPONENTE = TV.COMPONENTE AND T.DATA_TRANSACAO = TV.DATA_TRANSACAO AND T.NUM_TRANSACAO = TV.NUM_TRANSACAO AND T.LOJA = EVT.LOJA AND T.COMPONENTE = EVT.COMPONENTE AND T.DATA_TRANSACAO = EVT.DATA_TRANSACAO AND T.NUM_TRANSACAO = EVT.NUM_TRANSACAO AND EIP.LOJA = EVT.LOJA AND EIP.COMPONENTE = EVT.COMPONENTE AND EIP.DATA_TRANSACAO = EVT.DATA_TRANSACAO AND EIP.NUM_TRANSACAO = EVT.NUM_TRANSACAO AND EIP.NUM_EVENTO = EVT.NUM_EVENTO AND F.ID = EIP.CODIGO_FORMA AND TV.COD_USU_OPERADOR = U.ID AND T.TIPO_TRANSACAO = 11 AND TV.SITUACAO = 'A' AND T.COMPONENTE = C.ID AND tv.data_transacao BETWEEN ? AND ? and tv.loja = ? AND U.ID = ? GROUP BY T.LOJA,T.DATA_TRANSACAO,C.DESCRICAO, U.NOME, F.DESCRICAO

RELATORIO_FECHAMENTO_CAIXA_OPERADOR_GERAL = SELECT T.LOJA,T.DATA_TRANSACAO,C.DESCRICAO COMPONENTE, U.NOME OPERADOR, F.DESCRICAO,SUM((EIP.VALOR_BRUTO - EIP.VALOR_DESCONTO)) VALOR FROM TRANSACAO T, TRANSACAO_VENDA TV, EVENTO_TRANSACAO EVT, EVENTO_ITEM_PAGAMENTO EIP, FORMA_RECEBIMENTO F, COMPONENTE C, USUARIO U  WHERE T.LOJA = TV.LOJA AND T.COMPONENTE = TV.COMPONENTE AND T.DATA_TRANSACAO = TV.DATA_TRANSACAO AND T.NUM_TRANSACAO = TV.NUM_TRANSACAO AND T.LOJA = EVT.LOJA AND T.COMPONENTE = EVT.COMPONENTE AND T.DATA_TRANSACAO = EVT.DATA_TRANSACAO AND T.NUM_TRANSACAO = EVT.NUM_TRANSACAO AND EIP.LOJA = EVT.LOJA AND EIP.COMPONENTE = EVT.COMPONENTE AND EIP.DATA_TRANSACAO = EVT.DATA_TRANSACAO AND EIP.NUM_TRANSACAO = EVT.NUM_TRANSACAO AND EIP.NUM_EVENTO = EVT.NUM_EVENTO AND F.ID = EIP.CODIGO_FORMA AND TV.COD_USU_OPERADOR = U.ID AND T.TIPO_TRANSACAO = 11 AND TV.SITUACAO = 'A' AND T.COMPONENTE = C.ID AND tv.data_transacao BETWEEN ? AND ? and tv.loja = ? GROUP BY T.LOJA,T.DATA_TRANSACAO,C.DESCRICAO, U.NOME, F.DESCRICAO

RELATORIO_FECHAMENTO_CAIXA_GERAL = SELECT T.LOJA,T.DATA_TRANSACAO,C.DESCRICAO COMPONENTE,F.DESCRICAO,SUM((EIP.VALOR_BRUTO - EIP.VALOR_DESCONTO)) VALOR FROM TRANSACAO T, TRANSACAO_VENDA TV, EVENTO_TRANSACAO EVT, EVENTO_ITEM_PAGAMENTO EIP, FORMA_RECEBIMENTO F, USUARIO U, COMPONENTE C WHERE T.LOJA = TV.LOJA AND T.COMPONENTE = TV.COMPONENTE AND T.DATA_TRANSACAO = TV.DATA_TRANSACAO AND T.NUM_TRANSACAO = TV.NUM_TRANSACAO AND T.LOJA = EVT.LOJA AND T.COMPONENTE = EVT.COMPONENTE AND T.DATA_TRANSACAO = EVT.DATA_TRANSACAO AND T.NUM_TRANSACAO = EVT.NUM_TRANSACAO AND EIP.LOJA = EVT.LOJA AND EIP.COMPONENTE = EVT.COMPONENTE AND EIP.DATA_TRANSACAO = EVT.DATA_TRANSACAO AND EIP.NUM_TRANSACAO = EVT.NUM_TRANSACAO AND EIP.NUM_EVENTO = EVT.NUM_EVENTO AND F.ID = EIP.CODIGO_FORMA AND TV.COD_USU_OPERADOR = U.ID AND T.TIPO_TRANSACAO = 11 AND TV.SITUACAO = 'A' AND T.COMPONENTE = C.ID AND tv.data_transacao BETWEEN ? AND ? and tv.loja = ? GROUP BY T.LOJA,T.DATA_TRANSACAO,C.DESCRICAO,F.DESCRICAO

RELATORIO_COMISSAO_VENDEDOR = SELECT T.LOJA,T.DATA_TRANSACAO, TV.NUMERO_CUPOM CUPOM,TV.VALOR_CUPOM,TV.COMISSAO_USU_VENDEDOR COMISSAO,TV.COD_USU_VENDEDOR,U.NOME, ROUND((TV.COMISSAO_USU_VENDEDOR*TV.VALOR_CUPOM)/100,2,1) VALOR_COMISSAO FROM   TRANSACAO T, TRANSACAO_VENDA TV, USUARIO U WHERE   T.LOJA = TV.LOJA AND T.COMPONENTE = TV.COMPONENTE AND T.DATA_TRANSACAO = TV.DATA_TRANSACAO AND T.NUM_TRANSACAO = TV.NUM_TRANSACAO AND T.TIPO_TRANSACAO = 11 AND TV.COD_USU_VENDEDOR = U.ID AND TV.SITUACAO = 'A' AND T.LOJA = ? AND (T.DATA_TRANSACAO BETWEEN ? AND ?) AND TV.COD_USU_VENDEDOR = isNull(?, TV.COD_USU_VENDEDOR) ORDER BY T.DATA_TRANSACAO, T.LOJA  

RELATORIO_LUCRATIVIDADE_VENDAS = SELECT T.LOJA,T.COMPONENTE,T.NUM_TRANSACAO,T.DATA_TRANSACAO,TV.NUMERO_CUPOM CUPOM,TV.VALOR_CUPOM + ISNULL(TV.DESCONTO_CUPOM,0) VALOR_BRUTO, TV.DESCONTO_CUPOM ,TV.VALOR_CUPOM VALOR_LIQUIDO ,SUM(EIR.LUCRO)-ISNULL(TV.DESCONTO_CUPOM,0) LUCRO_BRUTO, ROUND(((SUM(EIR.LUCRO)-ISNULL(TV.DESCONTO_CUPOM,0))*100)/TV.VALOR_CUPOM,2,1) PERCENTUAL FROM TRANSACAO T, TRANSACAO_VENDA TV, EVENTO_TRANSACAO EVT, EVENTO_ITEM_REGISTRADO EIR WHERE T.LOJA = TV.LOJA AND T.COMPONENTE = TV.COMPONENTE AND T.DATA_TRANSACAO = TV.DATA_TRANSACAO AND T.NUM_TRANSACAO = TV.NUM_TRANSACAO AND T.LOJA = EVT.LOJA AND T.COMPONENTE = EVT.COMPONENTE AND T.DATA_TRANSACAO = EVT.DATA_TRANSACAO AND T.NUM_TRANSACAO = EVT.NUM_TRANSACAO AND EIR.LOJA = EVT.LOJA AND EIR.COMPONENTE = EVT.COMPONENTE AND EIR.DATA_TRANSACAO = EVT.DATA_TRANSACAO AND EIR.NUM_TRANSACAO = EVT.NUM_TRANSACAO AND EIR.NUM_EVENTO = EVT.NUM_EVENTO AND T.TIPO_TRANSACAO = 11 AND TV.SITUACAO = 'A' AND EIR.SITUACAO = 'A' AND T.LOJA = ? AND T.DATA_TRANSACAO BETWEEN ? AND ? GROUP BY T.LOJA,T.COMPONENTE,T.NUM_TRANSACAO,T.DATA_TRANSACAO,TV.NUMERO_CUPOM,TV.VALOR_CUPOM + ISNULL(TV.DESCONTO_CUPOM,0), TV.DESCONTO_CUPOM, TV.VALOR_CUPOM ORDER BY T.DATA_TRANSACAO, T.LOJA

RELATORIO_ESTOQUE_ATUAL = SELECT P.ID, P.CODIGO_EXTERNO, P.DESCRICAO_COMPLETA, P.DESCRICAO_COMPACTA, EP.QUANTIDADE FROM PRODUTO P, ESTOQUE_PRODUTO EP WHERE P.ID = EP.ID_PRODUTO AND EP.ID_LOJA = ? AND EP.ID_ESTOQUE = ?